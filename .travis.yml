language: r
r:
  - release
  - devel

warnings_are_errors: true

cache:
  packages
#  directories:
#    - $HOME/.cache/Tectonic

#define operating system
os: linux


## required to rebuild vignette when building the package
#before_install:
#  # Download and install conda
#  - wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O $HOME/miniconda.sh
#  - bash $HOME/miniconda.sh -b -u -p $HOME/miniconda
#  - export PATH="$HOME/miniconda/bin:$PATH"
#  - hash -r
#    # Install tectonic
#  - conda install -y -c conda-forge tectonic==0.1.12


services: docker


script:
  - docker pull dxjoke/tectonic-docker
  - R CMD build . --no-build-vignettes
  - R CMD check pdynmc_0.9.0.tar.gz --as-cran --no-build-vignettes




## required to deploy to github
#deploy:
#  provider: releases
#  cleanup: true
#  github_token: $GITHUB_TOKEN  # Set in the settings page of your repository, as a secure variable
#  keep_history: true
#  file: pdynmc*.t*gz
#  on:
#    branch: master
#    tags: true
#    repo: markusfritsch/pdynmc
