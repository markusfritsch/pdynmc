os: linux

language: r
r:
  - release
  - devel

cache:
  directories:
    - $HOME/.cache/Tectonic

r_check_args: "--no-vignettes"

sudo: required

services: docker

apt_packages:
  - libxml2-dev

script:
  - docker pull dxjoke/tectonic-docker
  - R CMD build . --compact-vignettes=gs+qpdf
  - R CMD check *tar.gz --as-cran

addons:
  apt:
    update: true
    packages:
      - libgs-dev
      - qpdf
      - ghostscript
